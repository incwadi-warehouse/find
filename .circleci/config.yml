version: 2.1
orbs:
  node: circleci/node@4.7.0
  cypress: cypress-io/cypress@1
workflows:
  tests:
    jobs:
      - node/test:
          matrix:
            parameters:
              version:
                - 'lts'
                - '12.22'
              run-command:
                - 'test:unit'
          pkg-manager: yarn
      - cypress/run:
          matrix:
            parameters:
              version:
                - 'lts'
                - '12.22'
          pkg-manager: yarn
          record: false
